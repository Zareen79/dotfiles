#!/bin/bash

function usage {
  echo "Usage: `basename $0` from to"
  echo
  echo "  from      should be the origin folder that you want to copy"
  echo "  to        should be the destination folder where you want to copy"
}

# Check arguments
if [ $# -ne 2 ]; then
  usage
  exit 1
fi

# It's important to add the / at the end of the path of from, so rsync works correctly
from=${1%/}/
to=${2%/}

if [ ! -d "$from" ]; then
  echo "The specified origin folder does not exist!"
  exit 1
fi

# Check if the destination folder exists
if [ ! -d "$to" ]; then
  echo "The destination folder does not exist"
  exit 1
fi

rsync -av -i --human-readable --info=progress2 --exclude=.DS_Store --delete "$from" "$to"
